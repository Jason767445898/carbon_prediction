# âš™ï¸ é¡¹ç›®é…ç½®è¯´æ˜

> AIç¢³ä»·æ ¼é¢„æµ‹ç³»ç»Ÿé…ç½®å‚è€ƒæ‰‹å†Œ  
> **ç‰ˆæœ¬**: v1.0 | **æ›´æ–°æ—¥æœŸ**: 2025-10-17

---

## ğŸ“‹ ç›®å½•

1. [å…¨å±€é…ç½®](#å…¨å±€é…ç½®)
2. [æ¨¡å‹é…ç½®](#æ¨¡å‹é…ç½®)
3. [æ•°æ®é…ç½®](#æ•°æ®é…ç½®)
4. [è¾“å‡ºé…ç½®](#è¾“å‡ºé…ç½®)
5. [ç¯å¢ƒå˜é‡](#ç¯å¢ƒå˜é‡)
6. [é…ç½®ç¤ºä¾‹](#é…ç½®ç¤ºä¾‹)

---

## ğŸŒ å…¨å±€é…ç½®

### é»˜è®¤é…ç½®ä½ç½®

ä¸»é…ç½®åœ¨ `carbon_price_prediction.py` ç¬¬43è¡Œå¼€å§‹ï¼š

```python
DEFAULT_CONFIG = {
    'target_column': 'carbon_price',     # ç›®æ ‡åˆ—å
    'sequence_length': 60,               # åºåˆ—é•¿åº¦
    'test_size': 0.2,                   # æµ‹è¯•é›†æ¯”ä¾‹
    'validation_size': 0.1,             # éªŒè¯é›†æ¯”ä¾‹
    'random_state': 42,                 # éšæœºç§å­
}
```

### é…ç½®å‚æ•°è¯¦è§£

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ | å¯é€‰èŒƒå›´ |
|------|------|--------|------|---------|
| `target_column` | str | 'carbon_price' | é¢„æµ‹ç›®æ ‡åˆ—å | æ•°æ®ä¸­çš„ä»»æ„åˆ—å |
| `sequence_length` | int | 60 | æ—¶é—´åºåˆ—é•¿åº¦ | 30-120 |
| `test_size` | float | 0.2 | æµ‹è¯•é›†æ¯”ä¾‹ | 0.1-0.3 |
| `validation_size` | float | 0.1 | éªŒè¯é›†æ¯”ä¾‹ | 0.05-0.15 |
| `random_state` | int | 42 | éšæœºç§å­ | ä»»æ„æ•´æ•° |

---

## ğŸ¤– æ¨¡å‹é…ç½®

### LSTM é…ç½®

```python
'lstm_config': {
    'units': [64, 32],          # æ¯å±‚ç¥ç»å…ƒæ•°
    'dropout': 0.2,             # Dropoutç‡
    'epochs': 100,              # è®­ç»ƒè½®æ•°
    'batch_size': 32,           # æ‰¹å¤„ç†å¤§å°
    'learning_rate': 0.001,     # å­¦ä¹ ç‡ï¼ˆå¯é€‰ï¼‰
}
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ | è°ƒä¼˜èŒƒå›´ |
|------|------|--------|---------|
| **units** | LSTMå±‚ç¥ç»å…ƒæ•°é‡åˆ—è¡¨ | [64, 32] | 16-256 |
| **dropout** | é˜²æ­¢è¿‡æ‹Ÿåˆçš„éšæœºå¤±æ´»ç‡ | 0.2 | 0.1-0.5 |
| **epochs** | è®­ç»ƒè½®æ•° | 100 | 50-200 |
| **batch_size** | æ‰¹å¤„ç†å¤§å° | 32 | 8-128 |

#### é…ç½®ç­–ç•¥

**å°æ•°æ®é›†ï¼ˆ<1000æ ·æœ¬ï¼‰**
```python
'lstm_config': {
    'units': [32, 16],
    'dropout': 0.3,
    'epochs': 100,
    'batch_size': 8
}
```

**å¤§æ•°æ®é›†ï¼ˆ>5000æ ·æœ¬ï¼‰**
```python
'lstm_config': {
    'units': [128, 64, 32],
    'dropout': 0.2,
    'epochs': 200,
    'batch_size': 128
}
```

**å¿«é€Ÿæµ‹è¯•**
```python
'lstm_config': {
    'units': [32, 16],
    'dropout': 0.2,
    'epochs': 50,
    'batch_size': 16
}
```

**é«˜æ€§èƒ½**
```python
'lstm_config': {
    'units': [256, 128, 64],
    'dropout': 0.3,
    'epochs': 300,
    'batch_size': 64
}
```

### Transformer é…ç½®

```python
'transformer_config': {
    'd_model': 128,             # æ¨¡å‹ç»´åº¦
    'num_heads': 8,             # æ³¨æ„åŠ›å¤´æ•°
    'num_layers': 4,            # ç¼–ç å™¨å±‚æ•°
    'dff': 512,                 # å‰é¦ˆç½‘ç»œç»´åº¦
    'dropout': 0.1,             # Dropoutç‡
    'epochs': 50,               # è®­ç»ƒè½®æ•°
    'batch_size': 32,           # æ‰¹å¤„ç†å¤§å°
}
```

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ | çº¦æŸæ¡ä»¶ |
|------|------|--------|---------|
| **d_model** | æ¨¡å‹éšè—å±‚ç»´åº¦ | 128 | å¿…é¡»èƒ½è¢«num_headsæ•´é™¤ |
| **num_heads** | å¤šå¤´æ³¨æ„åŠ›çš„å¤´æ•° | 8 | d_modelçš„å› å­ |
| **num_layers** | Transformerç¼–ç å™¨å±‚æ•° | 4 | 2-8 |
| **dff** | å‰é¦ˆç½‘ç»œç»´åº¦ | 512 | é€šå¸¸ä¸ºd_modelçš„2-4å€ |
| **dropout** | Dropoutç‡ | 0.1 | 0.05-0.6 |

#### é…ç½®ç­–ç•¥

**è½»é‡çº§ï¼ˆé¿å…è¿‡æ‹Ÿåˆï¼‰**
```python
'transformer_config': {
    'd_model': 16,
    'num_heads': 2,
    'num_layers': 2,
    'dff': 64,
    'dropout': 0.6,
    'epochs': 100,
    'batch_size': 8
}
```

**æ ‡å‡†é…ç½®**
```python
'transformer_config': {
    'd_model': 128,
    'num_heads': 8,
    'num_layers': 4,
    'dff': 512,
    'dropout': 0.1,
    'epochs': 50,
    'batch_size': 32
}
```

**é«˜æ€§èƒ½**
```python
'transformer_config': {
    'd_model': 256,
    'num_heads': 16,
    'num_layers': 6,
    'dff': 1024,
    'dropout': 0.2,
    'epochs': 100,
    'batch_size': 64
}
```

---

## ğŸ“Š æ•°æ®é…ç½®

### æ–‡ä»¶è·¯å¾„é…ç½®

```python
# æ•°æ®æ–‡ä»¶è·¯å¾„ï¼ˆåœ¨ä»£ç ä¸­ä¿®æ”¹ï¼‰
DEFAULT_DATA_FILE = 'data.dta'
SAMPLE_DATA_FILE = 'carbon_price_test_data.xlsx'
```

### è¾“å‡ºç›®å½•é…ç½®

```python
OUTPUT_DIRS = {
    'txt': 'outputs/logs',              # æ–‡æœ¬æ—¥å¿—
    'excel': 'outputs/reports',         # ExcelæŠ¥å‘Š
    'pic': 'outputs/visualizations'     # å¯è§†åŒ–å›¾è¡¨
}
```

### æ–‡ä»¶å‘½åæ ¼å¼

```python
FILE_NAME_FORMAT = {
    'program_name': 'carbon_price_prediction',
    'timestamp_format': '%Y%m%d_%H%M%S'
}
```

---

## ğŸ“¤ è¾“å‡ºé…ç½®

### æŠ¥å‘Šç”Ÿæˆé€‰é¡¹

```python
# åœ¨ä¸»ç¨‹åºä¸­è®¾ç½®
GENERATE_REPORT = True          # ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
GENERATE_VISUALIZATIONS = True  # ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
SAVE_PREDICTIONS = True         # ä¿å­˜é¢„æµ‹ç»“æœ
```

### å¯è§†åŒ–é…ç½®

```python
# å›¾è¡¨å°ºå¯¸å’Œæ ·å¼
FIGURE_SIZE = (12, 8)
DPI = 100
STYLE = 'seaborn'
```

---

## ğŸŒ ç¯å¢ƒå˜é‡

### Python ç¯å¢ƒ

```bash
# Python ç‰ˆæœ¬è¦æ±‚
PYTHON_VERSION >= 3.7

# æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
```

### ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

```bash
# TensorFlow é…ç½®
export TF_CPP_MIN_LOG_LEVEL=2  # å‡å°‘TensorFlowæ—¥å¿—è¾“å‡º

# GPU é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
export CUDA_VISIBLE_DEVICES=0  # æŒ‡å®šä½¿ç”¨çš„GPU

# çº¿ç¨‹æ•°é…ç½®
export OMP_NUM_THREADS=4       # OpenMPçº¿ç¨‹æ•°
```

### macOS ç‰¹æ®Šé…ç½®

```bash
# å®‰è£… OpenMPï¼ˆå¿…é¡»ï¼ï¼‰
brew install libomp

# é˜²ä¼‘çœ è¿è¡Œï¼ˆé•¿æ—¶é—´ä»»åŠ¡ï¼‰
caffeinate -i python3 carbon_price_prediction.py
```

---

## ğŸ“ é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåŸºç¡€ä½¿ç”¨

```python
from carbon_price_prediction import CarbonPricePredictionSystem

# ä½¿ç”¨é»˜è®¤é…ç½®
system = CarbonPricePredictionSystem()
system.run_complete_analysis('data.xlsx')
```

### ç¤ºä¾‹2ï¼šè‡ªå®šä¹‰ç›®æ ‡åˆ—

```python
config = {
    'target_column': 'coal_price'  # ä½¿ç”¨ä¸åŒçš„ç›®æ ‡åˆ—
}
system = CarbonPricePredictionSystem(config=config)
system.run_complete_analysis('data.dta')
```

### ç¤ºä¾‹3ï¼šä¼˜åŒ–LSTMæ€§èƒ½

```python
config = {
    'target_column': 'carbon_price',
    'sequence_length': 90,
    'lstm_config': {
        'units': [128, 64],
        'dropout': 0.3,
        'epochs': 150,
        'batch_size': 16
    }
}
system = CarbonPricePredictionSystem(config=config)
system.run_complete_analysis('data.xlsx')
```

### ç¤ºä¾‹4ï¼šå¿«é€Ÿæµ‹è¯•é…ç½®

```python
config = {
    'sequence_length': 30,
    'lstm_config': {
        'units': [32, 16],
        'epochs': 20,  # å¿«é€Ÿæµ‹è¯•
        'batch_size': 16
    },
    'transformer_config': {
        'd_model': 64,
        'num_heads': 4,
        'num_layers': 2,
        'epochs': 10
    }
}
system = CarbonPricePredictionSystem(config=config)
system.run_complete_analysis('data.xlsx')
```

### ç¤ºä¾‹5ï¼šç”Ÿäº§ç¯å¢ƒé…ç½®

```python
config = {
    'target_column': 'carbon_price',
    'sequence_length': 60,
    'test_size': 0.15,
    'validation_size': 0.1,
    'random_state': 42,
    'lstm_config': {
        'units': [72, 36],
        'dropout': 0.16,
        'epochs': 140,
        'batch_size': 8
    },
    'transformer_config': {
        'd_model': 16,
        'num_heads': 2,
        'num_layers': 2,
        'dff': 64,
        'dropout': 0.6,
        'epochs': 100,
        'batch_size': 8
    }
}
system = CarbonPricePredictionSystem(config=config)
system.run_complete_analysis('production_data.dta')
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶ç®¡ç†

### åˆ›å»ºç‹¬ç«‹é…ç½®æ–‡ä»¶

å»ºè®®åˆ›å»º `config.py` ç»Ÿä¸€ç®¡ç†é…ç½®ï¼š

```python
# config.py
PRODUCTION_CONFIG = {
    'target_column': 'carbon_price',
    'sequence_length': 60,
    'lstm_config': {
        'units': [72, 36],
        'dropout': 0.16,
        'epochs': 140,
        'batch_size': 8
    },
    'transformer_config': {
        'd_model': 16,
        'num_heads': 2,
        'num_layers': 2,
        'dff': 64,
        'dropout': 0.6,
        'epochs': 100
    }
}

TESTING_CONFIG = {
    'sequence_length': 30,
    'lstm_config': {
        'epochs': 20,
        'batch_size': 16
    }
}
```

### ä½¿ç”¨é…ç½®æ–‡ä»¶

```python
from config import PRODUCTION_CONFIG
from carbon_price_prediction import CarbonPricePredictionSystem

system = CarbonPricePredictionSystem(config=PRODUCTION_CONFIG)
system.run_complete_analysis('data.xlsx')
```

---

## ğŸ“Š æ€§èƒ½è°ƒä¼˜å»ºè®®

### æ ¹æ®æ•°æ®é‡è°ƒæ•´

| æ•°æ®é‡ | sequence_length | batch_size | epochs |
|--------|----------------|-----------|--------|
| < 500 | 30 | 8 | 100 |
| 500-1000 | 60 | 16 | 150 |
| 1000-5000 | 60 | 32 | 200 |
| > 5000 | 120 | 64 | 300 |

### æ ¹æ®ç¡¬ä»¶è°ƒæ•´

**8GB å†…å­˜**
```python
config = {
    'lstm_config': {'batch_size': 16, 'units': [32, 16]},
    'transformer_config': {'d_model': 64, 'batch_size': 8}
}
```

**16GB+ å†…å­˜**
```python
config = {
    'lstm_config': {'batch_size': 64, 'units': [128, 64]},
    'transformer_config': {'d_model': 256, 'batch_size': 32}
}
```

**æœ‰ GPU**
```python
config = {
    'lstm_config': {'batch_size': 128, 'epochs': 500},
    'transformer_config': {'batch_size': 64, 'epochs': 200}
}
```

---

## âš ï¸ å¸¸è§é…ç½®é”™è¯¯

### é”™è¯¯1ï¼šnum_heads ä¸èƒ½æ•´é™¤ d_model

```python
# âŒ é”™è¯¯
'transformer_config': {
    'd_model': 100,
    'num_heads': 8  # 100 ä¸èƒ½è¢« 8 æ•´é™¤
}

# âœ… æ­£ç¡®
'transformer_config': {
    'd_model': 128,  # 128 = 8 Ã— 16
    'num_heads': 8
}
```

### é”™è¯¯2ï¼šbatch_size è¿‡å¤§å¯¼è‡´å†…å­˜æº¢å‡º

```python
# âŒ å†…å­˜ä¸è¶³æ—¶
'lstm_config': {'batch_size': 256}

# âœ… å‡å° batch_size
'lstm_config': {'batch_size': 16}
```

### é”™è¯¯3ï¼šç›®æ ‡åˆ—åä¸åŒ¹é…

```python
# âŒ åˆ—åé”™è¯¯
config = {'target_column': 'carbon_price'}  # ä½†æ•°æ®ä¸­æ˜¯ 'coal_price'

# âœ… ä½¿ç”¨æ­£ç¡®åˆ—å
config = {'target_column': 'coal_price'}
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“– [è¯¦ç»†ä½¿ç”¨æŒ‡å—](./ç¢³ä»·æ ¼é¢„æµ‹ç³»ç»Ÿä½¿ç”¨æŒ‡å—.md)
- ğŸ”§ [å‚æ•°è°ƒä¼˜æŒ‡å—](./å‚æ•°è°ƒä¼˜å®Œæ•´æŒ‡å—.md)
- ğŸ› [é—®é¢˜è¯Šæ–­æŠ¥å‘Š](./å‚æ•°ä¸ä¸€è‡´é—®é¢˜è¯Šæ–­æŠ¥å‘Š.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-17  
**ç»´æŠ¤å›¢é˜Ÿ**: AI Research Team
