# ç¢³ä»·æ ¼é¢„æµ‹æ¨¡åž‹å‚æ•°ä¼˜åŒ–è¯´æ˜Ž

## ðŸ“Š ç¬¬ä¸€è½®è°ƒä¼˜ç»“æžœåˆ†æž

### LSTMæ¨¡åž‹è¡¨çŽ°
| é…ç½® | batch_size | dropout | RÂ² | RMSE | çŠ¶æ€ |
|------|------------|---------|-------|------|------|
| é…ç½®1 | 32 | 0.2 | -0.6614 | 133.56 | âŒ å·® |
| é…ç½®2 | 32 | 0.2 | -0.4681 | 125.55 | âŒ å·® |
| é…ç½®3 | 32 | 0.3 | -0.4092 | 123.01 | âŒ å·® |
| **é…ç½®4** | **16** | **0.2** | **0.6778** | **58.82** | âœ… **æœ€ä½³** |
| é…ç½®5 | 32 | 0.2 | -1.7995 | 173.38 | âŒ å·® |

### Transformeræ¨¡åž‹è¡¨çŽ°
| é…ç½® | d_model | num_heads | num_layers | RÂ² | RMSE | çŠ¶æ€ |
|------|---------|-----------|------------|-------|------|------|
| é…ç½®1 | 128 | 8 | 4 | -3.4284 | 218.06 | âŒ ä¸¥é‡è¿‡æ‹Ÿåˆ |
| é…ç½®2 | 256 | 8 | 4 | -0.7693 | 137.84 | âŒ è¿‡æ‹Ÿåˆ |
| é…ç½®3 | 128 | 16 | 4 | -2.4539 | 192.58 | âŒ è¿‡æ‹Ÿåˆ |
| é…ç½®4 | 128 | 8 | 6 | -7.3543 | 299.51 | âŒ ä¸¥é‡è¿‡æ‹Ÿåˆ |
| é…ç½®5 | 128 | 8 | 4 | -4.9404 | 252.56 | âŒ è¿‡æ‹Ÿåˆ |
| é…ç½®6 | 128 | 8 | 4 | -3.9597 | 230.77 | âŒ è¿‡æ‹Ÿåˆ |

### ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ¨¡åž‹ï¼ˆå‚è€ƒåŸºå‡†ï¼‰
- **RandomForest**: RÂ² = 0.943, RMSE = 40.69 âœ… ä¼˜ç§€
- **GradientBoosting**: RÂ² = 0.876, RMSE = 60.13 âœ… è‰¯å¥½
- **XGBoost**: RÂ² = 0.660, RMSE = 99.38 âœ… å¯æŽ¥å—

---

## ðŸŽ¯ å…³é”®å‘çŽ°ä¸Žé—®é¢˜è¯Šæ–­

### 1. LSTMæ¨¡åž‹é—®é¢˜
- **å°batch_sizeæ•ˆæžœæ˜¾è‘—**: batch_size=16æ—¶RÂ²ä»Žè´Ÿå€¼è·ƒå‡è‡³0.6778
- **å¤§batch_sizeè¡¨çŽ°å·®**: batch_size=32æ—¶æ¨¡åž‹æ— æ³•æ”¶æ•›
- **åŽŸå› **: æ•°æ®é›†è¾ƒå°(1247æ ·æœ¬)ï¼Œå°batch_sizeæä¾›æ›´é¢‘ç¹çš„æ¢¯åº¦æ›´æ–°

### 2. Transformeræ¨¡åž‹é—®é¢˜
- **æ‰€æœ‰é…ç½®RÂ²ä¸ºè´Ÿ**: è¡¨æ˜Žæ¨¡åž‹é¢„æµ‹æ¯”ç®€å•å‡å€¼æ›´å·®
- **ä¸¥é‡è¿‡æ‹Ÿåˆ**: æ¨¡åž‹å¤æ‚åº¦è¿‡é«˜ï¼Œå‚æ•°é‡è¾¾2.6M+
- **æ•°æ®ä¸åŒ¹é…**: Transformeréœ€è¦æ›´å¤šæ•°æ®ï¼Œå½“å‰æ•°æ®é‡ä¸è¶³

### 3. æ•°æ®é¢„å¤„ç†é—®é¢˜
```
è­¦å‘Š: ä»æœ‰ 2494 ä¸ªNaNå€¼ï¼Œå°†å…¨éƒ¨ç”¨0å¡«å……
```
- NaNå€¼å¤„ç†ç­–ç•¥å¯èƒ½å½±å“åºåˆ—æ¨¡åž‹æ€§èƒ½
- éœ€è¦æ›´æ™ºèƒ½çš„æ’å€¼æˆ–å¡«å……ç­–ç•¥

---

## ðŸš€ ç¬¬äºŒè½®ä¼˜åŒ–ç­–ç•¥

### LSTMæ¨¡åž‹ä¼˜åŒ–æ–¹å‘
åŸºäºŽæœ€ä½³é…ç½®ï¼ˆbatch_size=16, RÂ²=0.6778ï¼‰è¿›è¡Œå¾®è°ƒï¼š

#### ä¼˜åŒ–ç»´åº¦1: ç½‘ç»œç»“æž„
```python
# å¢žåŠ æ·±åº¦
{'units': [128, 64, 32], 'dropout': 0.2, 'batch_size': 16}

# å¢žåŠ å®½åº¦
{'units': [128, 64], 'dropout': 0.2, 'batch_size': 16}

# å¹³è¡¡é…ç½®
{'units': [96, 64, 32], 'dropout': 0.25, 'batch_size': 16}
```

#### ä¼˜åŒ–ç»´åº¦2: æ­£åˆ™åŒ–
```python
# é™ä½Ždropoutï¼ˆå½“å‰å¯èƒ½è¿‡åº¦æ­£åˆ™åŒ–ï¼‰
{'units': [64, 32], 'dropout': 0.1, 'batch_size': 16}

# è°ƒæ•´dropout
{'units': [64, 32], 'dropout': 0.15, 'batch_size': 16}
```

#### ä¼˜åŒ–ç»´åº¦3: è®­ç»ƒç­–ç•¥
```python
# å¢žåŠ è®­ç»ƒè½®æ•°
{'units': [64, 32], 'dropout': 0.2, 'epochs': 150, 'batch_size': 16}

# æ›´å°batch_size
{'units': [64, 32], 'dropout': 0.2, 'epochs': 100, 'batch_size': 8}

# æ›´å°batch + æ›´å¤šepochs
{'units': [64, 32], 'dropout': 0.2, 'epochs': 200, 'batch_size': 8}
```

### Transformeræ¨¡åž‹ä¼˜åŒ–æ–¹å‘
**æ ¸å¿ƒç­–ç•¥**: å¤§å¹…ç®€åŒ–æ¨¡åž‹ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ

#### ä¼˜åŒ–ç»´åº¦1: å‡å°‘æ¨¡åž‹å¤æ‚åº¦
```python
# è½»é‡çº§é…ç½®ï¼ˆå‚æ•°é‡å‡å°‘80%+ï¼‰
{
    'd_model': 64,
    'num_heads': 4,
    'num_layers': 2,  # ä»Ž4å±‚å‡è‡³2å±‚
    'dff': 256,       # ä»Ž512å‡è‡³256
    'dropout': 0.3,   # å¢žåŠ æ­£åˆ™åŒ–
    'epochs': 50
}

# è¶…è½»é‡çº§é…ç½®
{
    'd_model': 32,
    'num_heads': 4,
    'num_layers': 2,
    'dff': 128,
    'dropout': 0.3,
    'epochs': 50
}
```

#### ä¼˜åŒ–ç»´åº¦2: å¢žå¼ºæ­£åˆ™åŒ–
```python
# é«˜dropouté…ç½®
{
    'd_model': 64,
    'num_heads': 4,
    'num_layers': 3,
    'dff': 256,
    'dropout': 0.4,  # ä»Ž0.1å¢žè‡³0.4
    'epochs': 50
}

# æžç®€é…ç½® + é«˜æ­£åˆ™åŒ–
{
    'd_model': 64,
    'num_heads': 8,
    'num_layers': 2,
    'dff': 256,
    'dropout': 0.5,
    'epochs': 50
}
```

#### ä¼˜åŒ–ç»´åº¦3: æœ€å°åŒ–å°è¯•
```python
# æœ€å°å¯è¡Œé…ç½®
{
    'd_model': 32,
    'num_heads': 2,
    'num_layers': 2,
    'dff': 128,
    'dropout': 0.3,
    'epochs': 80
}

# å•å±‚Transformer
{
    'd_model': 32,
    'num_heads': 4,
    'num_layers': 1,  # åªç”¨1å±‚
    'dff': 128,
    'dropout': 0.2,
    'epochs': 100
}
```

---

## ðŸ“ˆ é¢„æœŸæ”¹è¿›ç›®æ ‡

### LSTMæ¨¡åž‹
- **å½“å‰æœ€ä½³**: RÂ² = 0.6778, RMSE = 58.82
- **ç›®æ ‡**: RÂ² > 0.75, RMSE < 50
- **ç­–ç•¥**: å¾®è°ƒç½‘ç»œç»“æž„å’Œè®­ç»ƒå‚æ•°

### Transformeræ¨¡åž‹
- **å½“å‰çŠ¶æ€**: æ‰€æœ‰é…ç½®RÂ² < 0ï¼ˆæ— æ³•ä½¿ç”¨ï¼‰
- **ç›®æ ‡**: RÂ² > 0, RMSE < 100ï¼ˆè‡³å°‘å¯ç”¨ï¼‰
- **ç­–ç•¥**: å¤§å¹…ç®€åŒ–æ¨¡åž‹ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ

### æ•´ä½“ç›®æ ‡
- æ‰¾åˆ°è‡³å°‘ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡åž‹æŽ¥è¿‘RandomForestæ€§èƒ½(RÂ²=0.943)
- ä¸ºä¸åŒåœºæ™¯æä¾›å¤šç§å¯é€‰æ¨¡åž‹é…ç½®
- è®°å½•è¯¦ç»†çš„è°ƒä¼˜è¿‡ç¨‹å’Œå‚æ•°å½±å“

---

## ðŸ”§ æŠ€æœ¯æ”¹è¿›å»ºè®®

### 1. æ•°æ®é¢„å¤„ç†ä¼˜åŒ–
```python
# å½“å‰é—®é¢˜
è­¦å‘Š: ä»æœ‰ 2494 ä¸ªNaNå€¼ï¼Œå°†å…¨éƒ¨ç”¨0å¡«å……

# å»ºè®®æ”¹è¿›
- ä½¿ç”¨çº¿æ€§æ’å€¼æˆ–å¤šé¡¹å¼æ’å€¼æ›¿ä»£0å¡«å……
- ä½¿ç”¨å‰å‘/åŽå‘å¡«å……çš„ç»„åˆ
- è€ƒè™‘ä½¿ç”¨KNNæ’å€¼
- ç§»é™¤NaNæ¯”ä¾‹è¿‡é«˜çš„ç‰¹å¾
```

### 2. ç‰¹å¾å·¥ç¨‹ä¼˜åŒ–
- æ·»åŠ æ›´å¤šæ—¶é—´åºåˆ—ç‰¹å¾ï¼ˆç§»åŠ¨å¹³å‡ã€è¶‹åŠ¿ç­‰ï¼‰
- ç‰¹å¾é‡è¦æ€§åˆ†æžï¼Œç§»é™¤å†—ä½™ç‰¹å¾
- è€ƒè™‘ä½¿ç”¨PCAé™ç»´

### 3. è®­ç»ƒç­–ç•¥ä¼˜åŒ–
- ä½¿ç”¨KæŠ˜äº¤å‰éªŒè¯
- å®žæ–½early stoppingé˜²æ­¢è¿‡æ‹Ÿåˆ
- å°è¯•å­¦ä¹ çŽ‡è°ƒåº¦ç­–ç•¥
- è€ƒè™‘ä½¿ç”¨ensembleæ–¹æ³•

### 4. è¯„ä¼°æŒ‡æ ‡æ‰©å±•
å½“å‰æŒ‡æ ‡: MSE, MAE, RMSE, RÂ², MAPE, Direction_Accuracy
å»ºè®®æ·»åŠ :
- Sharpe Ratio (æŠ•èµ„æ€§èƒ½)
- Max Drawdown (æœ€å¤§å›žæ’¤)
- Hit Rate (æ–¹å‘é¢„æµ‹å‡†ç¡®çŽ‡)

---

## ðŸ“ æ‰§è¡Œè®¡åˆ’

### ç¬¬äºŒè½®è°ƒä¼˜
âœ… **æ­£åœ¨æ‰§è¡Œ**
- 10ä¸ªLSTMé…ç½®æµ‹è¯•
- 8ä¸ªTransformeré…ç½®æµ‹è¯•
- é¢„è®¡è€—æ—¶: 2-3å°æ—¶

### åŽç»­ä¼˜åŒ–
1. **æ•°æ®é¢„å¤„ç†æ”¹è¿›** (å¦‚å‘çŽ°ä»æœ‰æ”¹è¿›ç©ºé—´)
2. **ç‰¹å¾å·¥ç¨‹ä¼˜åŒ–** (å¦‚æ¨¡åž‹æ€§èƒ½è¾¾ä¸åˆ°é¢„æœŸ)
3. **é›†æˆå­¦ä¹ ** (ç»“åˆå¤šä¸ªæ¨¡åž‹çš„ä¼˜åŠ¿)
4. **è¶…å‚æ•°ç½‘æ ¼æœç´¢** (ç²¾ç»†è°ƒä¼˜)

---

## ðŸ“Š å‚æ•°é…ç½®æ–‡ä»¶ä½ç½®

- **è°ƒä¼˜è„šæœ¬**: `parameter_tuning.py`
- **è°ƒä¼˜æ—¥å¿—**: `parameter_tuning.txt`
- **ä¸»ç¨‹åº**: `carbon_price_prediction.py`

---

## â° æ›´æ–°æ—¶é—´

- ç¬¬ä¸€è½®è°ƒä¼˜å®Œæˆ: 2025-10-14 18:52
- ç¬¬äºŒè½®è°ƒä¼˜å¼€å§‹: 2025-10-14 20:46
- æ–‡æ¡£åˆ›å»º: 2025-10-14 20:52

---

## ðŸ“Œ å…³é”®ç»“è®º

1. **å°batch_sizeæ˜¯å…³é”®**: å¯¹äºŽå°æ•°æ®é›†ï¼Œbatch_size=8-16è¡¨çŽ°æœ€ä½³
2. **Transformerä¸é€‚åˆå°æ•°æ®é›†**: éœ€è¦å¤§å¹…ç®€åŒ–æˆ–è€ƒè™‘æ”¾å¼ƒ
3. **ä¼ ç»ŸMLæ¨¡åž‹ä¼˜å¼‚**: RandomForestå’ŒGradientBoostingè¡¨çŽ°å‡ºè‰²ï¼Œåº”ä½œä¸ºbaseline
4. **æ•°æ®è´¨é‡å¾ˆé‡è¦**: NaNå€¼å¤„ç†ç­–ç•¥æ˜¾è‘—å½±å“æ¨¡åž‹æ€§èƒ½
